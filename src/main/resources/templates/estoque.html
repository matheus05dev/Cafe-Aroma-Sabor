<!-- Dashboard - Café Aroma & Sabor -->
<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="fragments/heads :: heads"></head>
    <body>
        <header th:replace="fragments/header :: header"></header>
        <main class="container main-content">
            <h1 class="mb-4">Visão Geral do Estoque</h1>
            <!-- Cards de resumo -->
            <div class="row g-4 mb-4">
                <div class="col-md-4">
                    <div class="card text-bg-success h-100">
                        <div class="card-body">
                            <h5 class="card-title">Produtos em Estoque</h5>
                            <p class="card-text display-6" th:text="${totalProdutosEmEstoque}"></p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card text-bg-warning h-100">
                        <div class="card-body">
                            <h5 class="card-title">Produtos com Estoque Mínimo</h5>
                            <p class="card-text display-6" th:text="${produtosComEstoqueMinimo}"></p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card text-bg-danger h-100">
                        <div class="card-body">
                            <h5 class="card-title">Produtos com Validade Próxima</h5>
                            <p class="card-text display-6" th:text="${produtosComValidadeProxima}"></p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Tabela de produtos em destaque -->
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    Produtos em Destaque
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-striped mb-0">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Quantidade Atual</th>
                                    <th>Estoque Mínimo</th>
                                    <th>Validade Mais Próxima</th>
                                    <th>Aviso</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="estoque : ${estoques}">
                                    <td th:text="${estoque.produto.nome}"></td>
                                    <td th:text="${estoque.quantidadeAtual}"></td>
                                    <td th:text="${estoque.estoqueMinimo}"></td>
                                    <td th:text="${estoque.dataValidade != null ? #temporals.format(estoque.dataValidade, 'dd/MM/yyyy') : 'N/A'}"></td>
                                    <td>
                                        <span th:if="${estoque.avisoEstoque != null}" th:text="${estoque.avisoEstoque}" class="badge bg-danger"></span>
                                        <span th:unless="${estoque.avisoEstoque != null}" class="badge bg-success">Ok</span>
                                    </td>
                                </tr>
                                <tr th:if="${#lists.isEmpty(estoques)}">
                                    <td colspan="5">Nenhum produto em estoque encontrado.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
        <footer th:replace="fragments/footer :: footer"></footer>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>